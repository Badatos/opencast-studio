(this["webpackJsonpopencast-react-studio"]=this["webpackJsonpopencast-react-studio"]||[]).push([[4],{159:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n(4),a=n(115),o=n(2),i=n.n(o),l=n(118),u=n(112),s=n(128),d=n(119),b=n(7),p=n(19),O=function(){return{mediaDevices:[],audioAllowed:null,audioStream:null,audioUnexpectedEnd:!1,audioSupported:Object(p.f)(),displayAllowed:null,displayStream:null,displayUnexpectedEnd:!1,displaySupported:Object(p.d)(),userAllowed:null,userStream:null,userUnexpectedEnd:!1,userSupported:Object(p.f)(),videoChoice:"none",audioChoice:"none",isRecording:!1,prematureRecordingEnd:!1,recordings:[],title:"",presenter:"",start:null,end:null,upload:{error:null,state:"not_uploaded",secondsLeft:null,currentProgress:0}}},f=function(e,t){switch(t.type){case"UPDATE_MEDIA_DEVICES":return Object(b.a)(Object(b.a)({},e),{},{mediaDevices:t.payload});case"CHOOSE_AUDIO":return Object(b.a)(Object(b.a)({},e),{},{audioChoice:t.payload});case"CHOOSE_VIDEO":return Object(b.a)(Object(b.a)({},e),{},{videoChoice:t.payload});case"SHARE_AUDIO":return Object(b.a)(Object(b.a)({},e),{},{audioStream:t.payload,audioAllowed:!0,audioUnexpectedEnd:!1});case"BLOCK_AUDIO":return Object(b.a)(Object(b.a)({},e),{},{audioStream:null,audioAllowed:!1,audioUnexpectedEnd:!1});case"UNSHARE_AUDIO":return Object(b.a)(Object(b.a)({},e),{},{audioStream:null,audioUnexpectedEnd:!1});case"AUDIO_UNEXPETED_END":return Object(b.a)(Object(b.a)({},e),{},{audioStream:null,audioUnexpectedEnd:!0});case"SHARE_DISPLAY":return Object(b.a)(Object(b.a)({},e),{},{displayStream:t.payload,displayAllowed:!0,displayUnexpectedEnd:!1});case"BLOCK_DISPLAY":return Object(b.a)(Object(b.a)({},e),{},{displayStream:null,displayAllowed:!1,displayUnexpectedEnd:!1});case"UNSHARE_DISPLAY":return Object(b.a)(Object(b.a)({},e),{},{displayStream:null,displayUnexpectedEnd:!1});case"DISPLAY_UNEXPETED_END":return Object(b.a)(Object(b.a)({},e),{},{displayStream:null,displayUnexpectedEnd:!0});case"SHARE_USER":return Object(b.a)(Object(b.a)({},e),{},{userStream:t.payload,userAllowed:!0,userUnexpectedEnd:!1});case"BLOCK_USER":return Object(b.a)(Object(b.a)({},e),{},{userStream:null,userAllowed:!1,userUnexpectedEnd:!1});case"UNSHARE_USER":return Object(b.a)(Object(b.a)({},e),{},{userStream:null,userUnexpectedEnd:!1});case"USER_UNEXPETED_END":return Object(b.a)(Object(b.a)({},e),{},{userStream:null,userUnexpectedEnd:!0});case"START_RECORDING":return Object(b.a)(Object(b.a)({},e),{},{isRecording:!0});case"STOP_RECORDING":return Object(b.a)(Object(b.a)({},e),{},{isRecording:!1});case"STOP_RECORDING_PREMATURELY":return Object(b.a)(Object(b.a)({},e),{},{isRecording:!1,prematureRecordingEnd:!0});case"CLEAR_RECORDINGS":return Object(b.a)(Object(b.a)({},e),{},{recordings:[],prematureRecordingEnd:!1});case"ADD_RECORDING":var n=[].concat(Object(d.a)(e.recordings.filter((function(e){return e.deviceType!==t.payload.deviceType}))),[t.payload]);return Object(b.a)(Object(b.a)({},e),{},{recordings:n});case"UPLOAD_ERROR":return Object(b.a)(Object(b.a)({},e),{},{upload:Object(b.a)(Object(b.a)({},e.upload),{},{error:t.payload,state:"error"})});case"UPLOAD_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{upload:Object(b.a)(Object(b.a)({},e.upload),{},{error:null,state:"uploading"})});case"UPLOAD_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{upload:Object(b.a)(Object(b.a)({},e.upload),{},{error:null,state:"uploaded"})});case"UPLOAD_PROGRESS_UPDATE":return Object(b.a)(Object(b.a)({},e),{},{upload:Object(b.a)(Object(b.a)({},e.upload),{},{secondsLeft:t.payload.secondsLeft,currentProgress:t.payload.currentProgress})});case"MARK_DOWNLOADED":var r=e.recordings.map((function(e,n){return n===t.payload?Object(b.a)(Object(b.a)({},e),{},{downloaded:!0}):e}));return Object(b.a)(Object(b.a)({},e),{},{recordings:r});case"UPDATE_TITLE":return Object(b.a)(Object(b.a)({},e),{},{title:t.payload});case"UPDATE_PRESENTER":return Object(b.a)(Object(b.a)({},e),{},{presenter:t.payload});case"UPDATE_START":return Object(b.a)(Object(b.a)({},e),{},{start:t.payload});case"UPDATE_END":return Object(b.a)(Object(b.a)({},e),{},{end:t.payload});case"RESET":return O();default:throw new Error}},j=Object(o.createContext)(null),v=Object(o.createContext)(null),g=function(e){var t=e.children,n=Object(o.useReducer)(f,O()),a=Object(r.a)(n,2),i=a[0],l=a[1];return Object(c.c)(v.Provider,{value:l},Object(c.c)(j.Provider,{value:i},t))},h=function(){return Object(o.useContext)(v)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(o.useContext)(j);return null!==e?t[e]:t},x=n(53),y=n(113),w=n(114);function S(){return Object(c.c)("article",null,Object(c.c)(x.b.h2,null,"ELAN e.V."),Object(c.c)(x.b.p,null,"The e-learning academic network (ELAN e.V.) is a German non-profit organization supporting higher-education organizations in all matters related to e-learning. Our services include practical tips about how to use digital technologies in education, legal advice and development of free, open-source software to support education."),Object(c.c)(x.b.h3,null,"Contact"),Object(c.c)(x.b.p,null,"Dr. Norbert Kleinefeld, Gesch\xe4ftsf\xfchrer",Object(c.c)("br",null),"Karlstr. 23",Object(c.c)("br",null),"D-26123 Oldenburg"),Object(c.c)(x.b.p,null,Object(c.c)(y.a,{icon:w.n})," ",Object(c.c)(x.b.a,{href:"https://elan-ev.de"},"elan-ev.de"),Object(c.c)("br",null),Object(c.c)(y.a,{icon:w.k})," ",Object(c.c)(x.b.a,{href:"mailto:kontakt@elan-ev.de"},"kontakt@elan-ev.de"),Object(c.c)("br",null),Object(c.c)(y.a,{icon:w.t})," ",Object(c.c)(x.b.a,{href:"tel:+4944199866610"},"+49\u2009441 998\u2009666\u200910")),Object(c.c)(x.b.p,null,"Registergericht: Amtsgericht Oldenburg",Object(c.c)("br",null),"Registernummer: VR 200644",Object(c.c)("br",null),"USt.-ID-Nr.: DE 265901392"))}var k=function(e){return Object(c.c)(a.d,null,Object(c.c)("article",{sx:{maxWidth:"900px",margin:"0 auto"}},Object(c.c)("header",null,Object(c.c)(x.b.h1,null,"Opencast Studio")),Object(c.c)(x.b.p,null,"A web-based recording studio for ",Object(c.c)(x.b.a,{href:"https://opencast.org"},"Opencast"),"."),Object(c.c)(x.b.p,null,"Opencast Studio allows you to record your camera, your display and your microphone\u02bcs audio. You can then either download your recordings or upload them directly to an Opencast instance (usually the one of your university)."),Object(c.c)(x.b.p,null,"This is free software under the terms of the"," ",Object(c.c)(x.b.a,{href:"https://github.com/elan-ev/opencast-studio/blob/master/LICENSE"},"MIT License")," ","developed by the ",Object(c.c)(x.b.a,{href:"https://elan-ev.de"},"ELAN e.V.")," in cooperation with the ",Object(c.c)(x.b.a,{href:"https://ethz.ch"},"ETH Z\xfcrich"),"."),Object(c.c)(x.b.h2,null,"How it works"),Object(c.c)(x.b.p,null,"Opencast Studio uses the recording capabilities built into modern browsers to record audio and video streams. The recording happens in the user\u02bcs browser and no server is involved in the recording."),Object(c.c)(i.a.Fragment,null,Object(c.c)(x.b.h2,null,"Support"),Object(c.c)(x.b.p,null,"If you are experiencing any difficulties or found any bugs, please take a look at the"," ",Object(c.c)(x.b.a,{href:"https://github.com/elan-ev/opencast-studio/issues"},"issue tracker on GitHub"),". Before filing a new issue, please check if one about your topic already exists. We regularly check incoming issues and do our best to address bugs in a timely manner."),Object(c.c)(x.b.p,null,"If you are interested in additional development or want to support the development of Opencast Studio, please contact"," ",Object(c.c)(x.b.a,{href:"mailto:opencast-support@elan-ev.de"},"opencast-support@elan-ev.de"),".")),Object(c.c)(x.b.h2,null,"Credits"),Object(c.c)(x.b.p,null,"Thanks to the following people and institutions for contributing to this project:"),Object(c.c)("ul",null,Object(c.c)("li",null,Object(c.c)(x.b.a,{href:"https://github.com/slampunk"},"Duncan Smith")," for starting this project"),Object(c.c)("li",null,Object(c.c)(x.b.a,{href:"https://github.com/cilt-uct"},"University of Cape Town (CILT)")," ","for letting Duncan start the project"),Object(c.c)("li",null,Object(c.c)(x.b.a,{href:"https://ethz.ch"},"ETH Z\xfcrich")," for financial support and testing"),Object(c.c)("li",null,Object(c.c)(x.b.a,{href:"https://github.com/elan-ev"},"ELAN e.V.")," for the re-implementation and the ongoing development"),Object(c.c)("li",null,"And many members from the Opencast community who helped along the way.")),Object(c.c)(S,null),Object(c.c)(x.b.h2,null,"Version"),Object(c.c)(x.b.p,null,"Build date ","2021-03-18",", commit"," ",Object(c.c)(x.b.a,{"aria-label":"Git commit on GitHub",href:"https://github.com/elan-ev/opencast-studio/commit/ea93d85"},"ea93d85"),".")))},E=n(117),C=n(157);function D(){var e=m().isRecording;return Object(c.c)("header",{sx:{height:function(e){return e.heights.headerHeight},lineHeight:function(e){return e.heights.headerHeight},color:"background",display:"flex",justifyContent:"space-between",position:"relative",zIndex:3}},Object(c.c)("div",{sx:{backgroundColor:"gray.0",position:"absolute",zIndex:-3,height:"100%",width:"100%"}}),e&&Object(c.c)("div",{sx:{backgroundColor:"gray.0",position:"absolute",zIndex:20,height:"100%",width:"100%",opacity:.75}}),Object(c.c)(R,null),Object(c.c)(T,null))}var R=function(){var e=Object(u.h)();return Object(c.c)(l.b,{to:{pathname:"/",search:e.search}},Object(c.c)("picture",{sx:{display:"block",height:function(e){return e.heights.headerHeight}}},Object(c.c)("source",{media:"(min-width: 920px)",srcSet:"".concat("","/opencast-studio.svg")}),Object(c.c)("img",{src:"".concat("","/opencast-studio-small.svg"),alt:"Opencast Studio",sx:{height:function(e){return e.heights.headerHeight}}})))},A=function(e){var t=e.target,n=e.children,r=e.icon,a=Object(E.a)(e,["target","children","icon"]),o=Object(u.h)();return Object(c.c)(l.c,Object.assign({to:{pathname:t,search:o.search},exact:!0,activeStyle:{backgroundColor:"black"},sx:{color:"white",pl:[3,"10px"],pr:[3,"14px"],textDecoration:"none",fontSize:"18px",height:["auto","100%"],borderLeft:["none",function(e){return"1px solid ".concat(e.colors.gray[3])}],display:["block","inline-block"],width:["100%","auto"],"&:hover":{backgroundColor:"gray.1"}}},a),Object(c.c)("div",{sx:{width:"20px",display:"inline-block",textAlign:"right",mr:[3,3,2]}},Object(c.c)(y.a,{icon:r})),n)},T=function(e){var t=Object(o.useState)(!1),n=Object(r.a)(t,2),a=n[0],i=n[1],l=function(){return i(!1)},u=Object(C.a)().t;return Object(c.c)(o.Fragment,null,Object(c.c)("button",{onClick:function(){return i(!a)},title:u("nav-open-menu-button"),sx:{display:["inline-block","none"],border:function(e){return"2px solid ".concat(e.colors.gray[3])},borderRadius:"10px",color:"white",my:1,px:3,mx:1,fontSize:"20px",whiteSpace:"nowrap",backgroundColor:"transparent","&:hover":{backgroundColor:"gray.1"},"&:active":{}}},u("nav-open-menu-button"),Object(c.c)("span",{sx:{width:"23px",display:"inline-block"}},Object(c.c)(y.a,{icon:a?w.y:w.a,sx:{ml:"10px"}}))),Object(c.c)("nav",{ref:function(e){e&&(e.style.height=a?e.scrollHeight+"px":"")},sx:{overflow:"hidden",zIndex:10,height:["0px","100% !important"],top:[function(e){return e.heights.headerHeight},function(e){return e.heights.headerHeight},0],position:["absolute","static"],width:["100%","auto"],backgroundColor:["gray.0","none"],transition:["height 0.25s ease-out 0s","none"],scrollX:["none","auto"]}},Object(c.c)(A,{title:u("nav-recording"),target:"/",icon:w.D,onClick:l},u("nav-recording")),Object(c.c)(A,{title:u("nav-settings"),target:"/settings",icon:w.E,onClick:l},u("nav-settings")),Object(c.c)(A,{title:u("nav-about"),target:"/about",icon:w.o,onClick:l},u("nav-about"))),a&&Object(c.c)("div",{onClick:l,ref:function(e){return e&&(e.style.opacity=1)},sx:{display:[a?"block":"none","none"],backgroundColor:"rgba(0, 0, 0, 0.7)",position:"fixed",zIndex:-10,top:0,bottom:0,left:0,right:0,opacity:0,transition:"opacity 0.25s ease-out 0s"}}))};function U(e){var t,n=e.activeStep,r=e.updateActiveStep,a=Object(E.a)(e,["activeStep","updateActiveStep"]),o={currentStep:n+1,totalSteps:(null===(t=a.children)||void 0===t?void 0:t.length)||0,nextStep:function(){s(n+1)},previousStep:function(){s(n-1)},goToStep:u,firstStep:function(){u(1)},lastStep:function(){u(a.children.length)}},l=i.a.Children.map(a.children,(function(e,t){return o.isActive=t===n,o.isActive?function(e){var t=e.type;return"function"===typeof t||"object"===typeof t}(e)?i.a.cloneElement(e,o):e:null}));return Object(c.c)(i.a.Fragment,null,l);function u(e){s(e-1)}function s(e){n!==e&&(!function(e,t){return e<0||e>=t.length}(e,a.children)?r(e):console.error("".concat(e+1," is an invalid step")))}}var I=n(3),P=n.n(I),_=n(8),L=function(e,t,n){var r,c=e&&{max:e},a=(null===t||void 0===t||null===(r=t.height)||void 0===r?void 0:r.ideal)||n,o=a&&(e?{ideal:Math.min(a,e)}:{ideal:a});return{height:Object(b.a)(Object(b.a)({},c),o)}};function H(e){return z.apply(this,arguments)}function z(){return(z=Object(_.a)(P.a.mark((function e(t){var n,r,c=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({audio:!n||{deviceId:n},video:!1});case 4:(r=e.sent).getTracks().forEach((function(e){e.onended=function(){t({type:"AUDIO_UNEXPETED_END"})}})),t({type:"SHARE_AUDIO",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error: "+e.t0),t({type:"BLOCK_AUDIO"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(e,t){return F.apply(this,arguments)}function F(){return(F=Object(_.a)(P.a.mark((function e(t,n){var r,c,a,o,i,l,u,s=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},o=(null===(r=n.display)||void 0===r?void 0:r.maxFps)?{frameRate:{max:n.display.maxFps}}:{},i=L(null===(c=n.display)||void 0===c?void 0:c.maxHeight,a),l={video:Object(b.a)(Object(b.a)(Object(b.a)({cursor:"always"},o),a),i),audio:!1},e.prev=4,e.next=7,navigator.mediaDevices.getDisplayMedia(l);case 7:(u=e.sent).getTracks().forEach((function(e){e.onended=function(){t({type:"DISPLAY_UNEXPETED_END"})}})),t({type:"SHARE_DISPLAY",payload:u}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error: "+e.t0),t({type:"BLOCK_DISPLAY"});case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function M(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(_.a)(P.a.mark((function e(t,n,r){var c,a,o,i,l,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(null===(c=n.camera)||void 0===c?void 0:c.maxFps)?{frameRate:{max:n.camera.maxFps}}:{},i=L(null===(a=n.camera)||void 0===a?void 0:a.maxHeight,r,1080),l={video:Object(b.a)(Object(b.a)(Object(b.a)({facingMode:"user"},r),o),i),audio:!1},e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia(l);case 6:(u=e.sent).getTracks().forEach((function(e){e.onended=function(){t({type:"USER_UNEXPETED_END"})}})),t({type:"SHARE_USER",payload:u}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Error: "+e.t0),t({type:"BLOCK_USER"});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function q(e,t){null===e||void 0===e||e.getTracks().forEach((function(e){return e.stop()})),t({type:"UNSHARE_AUDIO"})}function B(e,t){null===e||void 0===e||e.getTracks().forEach((function(e){return e.stop()})),t({type:"UNSHARE_DISPLAY"})}function V(e,t){null===e||void 0===e||e.getTracks().forEach((function(e){return e.stop()})),t({type:"UNSHARE_USER"})}var G=n(126),K=n.n(G),X=n(48),Y=n.n(X),Q=function(e){var t=e.children;return Object(c.c)("div",{sx:{display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"space-between",p:3,pt:[2,2,3],"& > h1":{textAlign:"center",fontSize:["24px","27px","32px"]}}},t)};function J(e){var t=e.prev,n=void 0===t?null:t,r=e.next,o=void 0===r?null:r,i=e.children,l=Object(C.a)().t;return Object(c.c)(a.e,{sx:{alignItems:"end",minHeight:"40px"}},Object(c.c)(a.a,{sx:{flex:"1 1 0",textAlign:"left"}},n&&Object(c.c)(a.b,{sx:Object(b.a)({whiteSpace:"nowrap"},!0===n.danger?{variant:"buttons.danger"}:{variant:"buttons.text"}),onClick:n.onClick,disabled:n.disabled,danger:n.danger||!1,title:l(n.label||"back-button-label")},Object(c.c)(y.a,{icon:w.b}),l(n.label||"back-button-label"))),Object(c.c)(a.a,null,i),Object(c.c)(a.a,{sx:{flex:"1 1 0",textAlign:"right"}},o&&Object(c.c)(a.b,{sx:Object(b.a)({whiteSpace:"nowrap","& svg":{mr:0,ml:2}},!0===o.danger?{variant:"buttons.danger"}:{}),onClick:o.onClick,disabled:o.disabled,title:l(o.label||"next-button-label")},l(o.label||"next-button-label"),Object(c.c)(y.a,{icon:w.c}))))}var Z=i.a.createContext(null),$=function(){return i.a.useContext(Z)};function ee(e){var t=e.gap,n=void 0===t?0:t,a=e.minWidth,i=void 0===a?180:a,l=e.minHeight,u=void 0===l?140:l,s=e.children,d=K()(),b=d.ref,p=d.width,O=void 0===p?1:p,f=d.height,j=void 0===f?1:f,v=Object(o.useState)(0),g=Object(r.a)(v,2)[1],h=Object(o.useRef)(s.map((function(){return[void 0,void 0]}))),m=function(e){e.forEach((function(e,t){var n=Object(r.a)(e,2),c=n[0],a=n[1];c&&a&&(h.current[t]=[c,a])}))},x=s.map((function(e){return e.dimensions()}));m(x);var y=function(){var e=s.map((function(e){return e.dimensions()}));Y()(e,x)||(m(x=e),g((function(e){return e+1})))},w=function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];return n&&c?n/c:16/9};switch(s.length){case 1:var S,k,E=s[0],C=w(h.current[0]);return O>j*C?(k=j,S=j*C):(S=O,k=O/C),Object(c.c)(Z.Provider,{value:y},Object(c.c)("div",{ref:b,sx:{flex:"1 0 0",minHeight:u,display:"flex"}},Object(c.c)("div",{sx:{height:k,width:S,minWidth:"".concat(i,"px"),margin:"auto"}},E.body)));case 2:var D,R,A,T=h.current.map((function(e){return w(e)})),U=function(){var e=O-n,t=T[0]+T[1];if(e>j*t)return{rowHeights:Array(2).fill(j),rowWidths:T.map((function(e){return j*e}))};var r=e/t;return{rowHeights:s.map((function(e){return r})),rowWidths:T.map((function(e){return r*e}))}}(),I=U.rowWidths,P=U.rowHeights,_=function(){var e=j-n,t=1/(1/T[0]+1/T[1]);if(O>e*t){var r=e*t;return{colHeights:s.map((function(e,t){return r/T[t]})),colWidths:Array(2).fill(r)}}return{colHeights:s.map((function(e,t){return O/T[t]})),colWidths:Array(2).fill(O)}}(),L=_.colWidths,H=_.colHeights;return I[0]*P[0]+I[1]*P[1]>L[0]*H[0]+L[1]*H[1]?(A="row",D=I,R=P):(A="column",D=L,R=H),Object(c.c)(Z.Provider,{value:y},Object(c.c)("div",{ref:b,sx:{flex:"1 0 0",display:"flex",flexDirection:A,justifyContent:"space-between",minHeight:u}},Object(c.c)("div",{sx:{height:R[0],width:D[0],minWidth:"".concat(i,"px"),margin:"auto"}},s[0].body),Object(c.c)("div",{sx:{height:R[1],width:D[1],minWidth:"".concat(i,"px"),margin:"auto"}},s[1].body)));default:return Object(c.c)("p",null,"Internal error: too few or too many video streams")}}var te=function(e){var t=e.isDanger,n=Object(E.a)(e,["isDanger"]);return Object(c.c)("div",Object.assign({sx:{":not(:last-child)":{marginBottom:"1.5rem"},backgroundColor:t?"error":"gray.3",color:t?"background":"currentColor",borderRadius:2,padding:3,position:"relative"}},n))},ne=n(147),re=n.n(ne);function ce(e){var t=e.stream,n=Object(o.useRef)();return Object(o.useEffect)((function(){var e=n.current;if(e){var r=e.getContext("2d");r.lineWidth=2,r.strokeStyle="#f1c40f";var c=(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamSource(t),a=new re.a(c,{fftSize:1024});return a.animate(r),function(){return a.stop()}}return function(){}}),[t]),Object(c.c)("canvas",{ref:n,width:"800px",height:"200px",sx:{width:"100%",maxHeight:"200px",minHeight:0,flex:"1 0 70px",bg:"rgba(0,0,0,0.8)",borderRadius:"7px"}})}function ae(e){var t=h(),n=m(),r=n.audioStream,a=n.audioChoice,o=function(){return e.previousStep()},i=function(){return e.nextStep()},l=function(){return i()},u=function(){var e=Object(_.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"CHOOSE_AUDIO",payload:"microphone"}),n=window.localStorage.getItem("ocStudioLastAudioDevice"),e.next=4,H(t,n?{ideal:n}:null);case 4:return e.next=6,Object(p.i)(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){r&&q(r,t),t({type:"CHOOSE_AUDIO",payload:"none"})},d=function(){switch(a){case"none":return Object(c.c)(oe,{selectNoAudio:l,selectMicrophone:u,backToVideoSetup:o});case"microphone":return Object(c.c)(ie,{reselectSource:s,enterStudio:i});default:return"internal error :-("}}();return Object(c.c)(Q,null,d)}var oe=function(e){var t=e.selectNoAudio,n=e.selectMicrophone,r=e.backToVideoSetup,i=Object(C.a)().t;return Object(c.c)(o.Fragment,null,Object(c.c)(x.b.h1,null,i("sources-audio-question")),Object(c.c)(a.e,{sx:{flexDirection:["column","row"],maxWidth:850,width:"100%",mx:"auto",mb:3,flex:"1 0 auto",maxHeight:["none","350px"],"& > :first-of-type":{mb:[3,0],mr:[0,3]}}},Object(c.c)(le,{icon:w.p,label:i("sources-audio-microphone"),onClick:n}),Object(c.c)(le,{icon:w.q,label:i("sources-audio-without-audio"),onClick:t})),Object(c.c)(J,{prev:{onClick:r}}))},ie=function(e){var t,n,r,i=e.reselectSource,l=e.enterStudio,u=Object(C.a)().t,s=h(),d=m(),b=d.audioStream,O=d.audioAllowed,f=d.audioUnexpectedEnd,j=null===b||void 0===b||null===(t=b.getAudioTracks())||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.getSettings())||void 0===r?void 0:r.deviceId,v=Object(p.c)(d.mediaDevices,"audioinput");Object(o.useEffect)((function(){j&&window.localStorage.setItem("ocStudioLastAudioDevice",j)}));var g,S=function(){var e=Object(_.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b&&q(b,s),e.next=3,H(s,{exact:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=e.min,n=e.max;return Object(c.c)("div",{sx:{flex:1,maxHeight:n,minHeight:t}})};return g=b?Object(c.c)(o.Fragment,null,Object(c.c)(ce,{stream:b}),Object(c.c)("div",{sx:{display:"flex",width:"80%",my:3,fontSize:"18px",minWidth:"285px"}},Object(c.c)("span",{sx:{mr:3,display:"flex",flexDirection:"column",alignItems:"center"}},u("sources-audio-device"),":"),Object(c.c)("select",{sx:{variant:"styles.select",flex:"1 0 0",minWidth:0},value:j,onChange:function(e){return S(e.target.value)}},v.map((function(e,t){return Object(c.c)("option",{key:t,value:e.deviceId},e.label||"unlabeled microphone")}))))):!1===O?Object(c.c)(o.Fragment,null,Object(c.c)(y.a,{icon:w.m,size:"3x"}),Object(c.c)(k,{min:"16px",max:"48px"}),Object(c.c)(te,{isDanger:!0},Object(c.c)(a.f,{as:"h3",mb:2},u("source-audio-not-allowed-title")),Object(c.c)(a.k,{variant:"text"},u("source-audio-not-allowed-text")))):!0===f?Object(c.c)(o.Fragment,null,Object(c.c)(y.a,{icon:w.m,size:"3x"}),Object(c.c)(k,{min:"16px",max:"48px"}),Object(c.c)(te,{isDanger:!0},Object(c.c)(a.k,{variant:"text"},u("error-lost-audio-stream")))):Object(c.c)(a.j,{size:"75"}),Object(c.c)(o.Fragment,null,Object(c.c)(x.b.h1,null,u("sources-audio-microphone-selected")),Object(c.c)("div",{sx:{maxWidth:850,width:"100%",mx:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 0 auto",maxHeight:"400px"}},g),Object(c.c)(J,{prev:{label:"sources-audio-reselect-audio",onClick:i},next:{onClick:l}}))},le=function(e){var t=e.children,n=e.icon,r=e.label,a=e.onClick;return Object(c.c)("button",{onClick:a,title:r,sx:{fontFamily:"inherit",color:"gray.0",backgroundColor:"gray.4",border:"2px solid black",borderRadius:"8px",flex:"0 1 50%",p:2,"&:hover":{boxShadow:function(e){return"0 0 10px ".concat(e.colors.gray[2])},backgroundColor:"white"}}},Object(c.c)("div",{sx:{display:"block",textAlign:"center",mb:3}},Object(c.c)(y.a,{icon:n,size:"3x"})),Object(c.c)("div",{sx:{fontSize:4}},r),t)},ue=n(158),se=n(127),de=n(160),be=n(43),pe=n(42),Oe=function(e){var t=e.errors,n=e.register,r=e.label,a=e.name,o=e.required,i=e.validate,l=e.type,u=void 0===l?"text":l,s=Object(E.a)(e,["errors","register","label","name","required","validate","type"]),d=Object(C.a)().t;return Object(c.c)("div",{sx:{"&:not(:last-child)":{mb:3}}},Object(c.c)("label",{sx:{color:"text",display:"block",fontSize:2,fontWeight:"bold"}},r,Object(c.c)("div",{sx:{display:"block",boxSizing:"border-box",clear:"both",fontSize:2,position:"relative",textAlign:"left"}},Object(c.c)("input",Object.assign({"aria-invalid":t[a]?"true":"false","aria-describedby":"".concat(a,"Error"),autoComplete:"off",name:a,ref:n(Object(b.a)({validate:i},o?{required:d("forms-validation-error-required")}:{})),sx:{variant:"styles.input"},type:u},s)),t[a]&&Object(c.c)("p",{id:"".concat(a,"Error"),sx:{color:"error",fontSize:1,fontWeight:"body",mt:1}},t[a].message))))},fe=function(e){var t=e.onDownload,n=e.recording,r=e.title,o=e.presenter,i=Object(C.a)(),l=i.t,u=i.i18n,s=n.deviceType,d=n.mimeType,b=n.url,O=n.downloaded,f=n.media,j=l("desktop"===s?"sources-display":"sources-user"),v=Object(p.j)({mimeType:d,flavor:j,title:r,presenter:o});if(!b)return null;var g=f.size,h=function(e){var t=e<10?1:0;return e.toLocaleString(u.language,{minimumFractionDigits:t,maximumFractionDigits:t})},m=g<1e3?"".concat(g," B"):g<999500?"".concat(h(g/1e3)," KB"):g<9995e5?"".concat(h(g/1e6)," MB"):"".concat(h(g/1e9)," GB");return Object(c.c)("div",{sx:{display:"flex",flexDirection:"column",flex:"0 0 auto",mx:2,pb:"12px",alignItems:"center"}},Object(c.c)("div",{sx:{position:"relative",height:"150px",border:function(e){return"2px solid ".concat(e.colors.gray[1])}}},Object(c.c)("video",{muted:!0,src:b,onLoadedData:function(e){return e.target.currentTime=0},preload:"auto",sx:{maxWidth:"100%",height:"100%"}}),O&&Object(c.c)("div",{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",color:"primary",backgroundColor:"rgba(0, 0, 0, 0.4)"}},Object(c.c)(y.a,{icon:w.f,size:"4x"}))),Object(c.c)(a.b,{as:"a",title:l("save-creation-download-button"),sx:{width:"100%",maxWidth:"215px",margin:"auto",mt:"10px"},target:"_blank",download:v,href:b,rel:"noopener noreferrer",onClick:t},Object(c.c)(y.a,{icon:w.j}),l("save-creation-download-button")," ","(",m,")"))},je=[];function ve(e){var t=Object(pe.e)(),n=Object(C.a)().t,r=Object(be.n)(),i=m(),l=i.recordings,u=i.upload,s=i.title,d=i.presenter,b=i.start,p=i.end,O=h();function f(e){var t=Date.now();je.push({timestamp:t,progress:e});var n=Math.min(je.findIndex((function(e){return t-e.timestamp<5e3})),Math.max(0,je.length-6));je.splice(0,n);var r=null;if(je.length>=4){var c=t-je[0].timestamp,a=(e-je[0].progress)/c*1e3,o=1-e;r=Math.max(0,Math.round(o/a))}u.secondsLeft===r&&u.currentProgress===e||O({type:"UPLOAD_PROGRESS_UPDATE",payload:{secondsLeft:r,currentProgress:e}})}function j(){return v.apply(this,arguments)}function v(){return(v=Object(_.a)(P.a.mark((function e(){var c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"UPLOAD_REQUEST"}),je.push({timestamp:Date.now(),progress:0}),e.next=4,r.upload({recordings:l.filter(Boolean),title:s,presenter:d,start:b,end:p,uploadSettings:t.upload,onProgress:f});case 4:c=e.sent,je=[],e.t0=c,e.next=e.t0===be.l?9:e.t0===be.j?11:e.t0===be.k?13:e.t0===be.m?15:17;break;case 9:return O({type:"UPLOAD_SUCCESS"}),e.abrupt("break",18);case 11:return O({type:"UPLOAD_ERROR",payload:n("save-creation-upload-network-error")}),e.abrupt("break",18);case 13:return O({type:"UPLOAD_ERROR",payload:n("save-creation-upload-not-authorized")}),e.abrupt("break",18);case 15:return O({type:"UPLOAD_ERROR",payload:n("save-creation-upload-invalid-response")}),e.abrupt("break",18);case 17:O({type:"UPLOAD_ERROR",payload:n("save-creation-upload-unknown-error")});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.useEffect)((function(){var e=setInterval((function(){if("uploading"===u.state)if(je.length){var e=je[je.length-1];Date.now()-e.timestamp>3e3&&f(e.progress)}else f(0)}),1e3);return function(){return clearInterval(e)}}));var g=l.every((function(e){return e.downloaded})),y=("uploaded"===u.state||g)&&"uploading"!==u.state,w="not_uploaded"!==u.state||g,S=function(){if("not_uploaded"===u.state&&(r.getState()===be.i||r.getState()===be.c))return Object(c.c)(xe,null);switch(u.state){case"uploading":return Object(c.c)(Se,{currentProgress:u.currentProgress,secondsLeft:u.secondsLeft});case"uploaded":return Object(c.c)(ke,null);default:return Object(c.c)(ye,{uploadState:u,handleUpload:j})}}();return Object(c.c)(a.d,{sx:{display:"flex",flexDirection:"column",flex:"1 0 auto"}},Object(c.c)(x.b.h1,{sx:{textAlign:"center",fontSize:["26px","30px","32px"]}},n(y?"save-creation-title-done":"save-creation-title")),Object(c.c)("div",{sx:{display:"flex",flexDirection:["column","column","row"],"& > *":{flex:["0","0","1 0 50%"],p:[2,2,"0 32px"],"&:last-child":{borderLeft:["none","none",function(e){return"1px solid ".concat(e.colors.gray[3])}]}}}},Object(c.c)("div",null,Object(c.c)(x.b.h2,{sx:{pb:1,borderBottom:function(e){return"1px solid ".concat(e.colors.gray[2])}}},n("save-creation-subsection-title-upload")),Object(c.c)("div",{sx:{margin:"auto"}},S)),Object(c.c)("div",null,Object(c.c)(x.b.h2,{sx:{pb:1,borderBottom:function(e){return"1px solid ".concat(e.colors.gray[2])}}},n("save-creation-subsection-title-download")),Object(c.c)(me,Object.assign({dispatch:O},{title:s,presenter:d})))),Object(c.c)("div",{sx:{flex:"1 0 32px"}}),Object(c.c)(J,{next:null,prev:w?null:{onClick:function(){e.previousStep()},disabled:!1}},y&&Object(c.c)(ge,{goToFirstStep:e.firstStep})))}var ge=function(e){var t,n,r=e.goToFirstStep,o=Object(C.a)().t,i=h(),l=Object(pe.e)();if(null===(t=l.return)||void 0===t?void 0:t.target)if(he(l)){var u,s=(null===(u=l.return)||void 0===u?void 0:u.label)?o("save-creation-return-to",{label:l.return.label}):o("save-creation-return-to-no-label");n=Object(c.c)(a.b,{as:"a",title:s,href:l.return.target,sx:{whiteSpace:"nowrap",fontWeight:400,mb:2}},Object(c.c)(y.a,{icon:w.z}),s)}else console.warn("the given 'return.target' is not allowed (check 'return.allowedDomains' in 'settings.toml')");return Object(c.c)("div",{sx:{display:"flex",flexDirection:"column"}},n,Object(c.c)(a.b,{sx:{whiteSpace:"nowrap"},title:o("save-creation-new-recording"),onClick:function(){window.confirm(o("save-creation-new-recording-warning"))&&(i({type:"RESET"}),r())}},Object(c.c)(y.a,{icon:w.w}),o("save-creation-new-recording")))},he=function(e){var t,n;try{n=new URL(e.return.target,window.location)}catch(r){return!1}return[window.location.hostname].concat(Object(d.a)((null===(t=e.return)||void 0===t?void 0:t.allowedDomains)||[])).some((function(e){return n.hostname===e}))&&("https:"===n.protocol||"http:"===n.protocol)},me=function(e){var t=e.presenter,n=e.title,r=Object(C.a)().t,i=h(),l=m(),u=l.recordings,s=l.start,d=l.end;return Object(c.c)(o.Fragment,null,(null!==s||null!==d)&&Object(c.c)(te,{sx:{display:"flex",flexDirection:"column",alignItems:"center"}},Object(c.c)(y.a,{icon:w.m,sx:{fontSize:"26px",mb:3}}),Object(c.c)("p",{sx:{m:0}},r("save-creation-download-cut-warning"))),Object(c.c)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:["center","center","start"],flexWrap:"wrap"}},0===u.length?Object(c.c)(a.j,null):u.map((function(e,r){return Object(c.c)(fe,{key:r,recording:e,presenter:t,title:n,onDownload:function(){return i({type:"MARK_DOWNLOADED",payload:r})}})}))))},xe=function(){var e=Object(u.h)();return Object(c.c)(te,{key:"opencast-connection",isDanger:!0},Object(c.c)(ue.a,{i18nKey:"warning-missing-connection-settings"},"Warning.",Object(c.c)(l.b,{to:{pathname:"/settings",search:e.search},sx:{variant:"styles.a",color:"#ff2"}},"settings")))},ye=function(e){var t=e.uploadState,n=e.handleUpload,r=Object(pe.e)().upload||{},i=r.titleField,l=void 0===i?pe.b:i,u=r.presenterField,s=void 0===u?pe.b:u,d=Object(C.a)().t,b=Object(be.n)(),p=h(),O=m(),f=O.recordings,j=O.title,v=O.presenter,g=v||window.localStorage.getItem("ocStudioLastPresenter")||"",x=Object(se.a)(),S=x.errors,k=x.handleSubmit,E=x.register;function D(e){var t=e.target;p({type:{title:"UPDATE_TITLE",presenter:"UPDATE_PRESENTER"}[t.name],payload:t.value}),"presenter"===t.name&&window.localStorage.setItem("ocStudioLastPresenter",t.value)}Object(o.useEffect)((function(){g!==v&&p({type:"UPDATE_PRESENTER",payload:g})}));var R=b.prettyServerUrl()?Object(c.c)(ue.a,{i18nKey:"save-creation-upload-to"},"Upload to ",Object(c.c)("code",{sx:{backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"5px",padding:"1px 3px"}},{server:b.prettyServerUrl()})):d("save-creation-button-upload");return Object(c.c)(o.Fragment,null,Object(c.c)(we,null),Object(c.c)("form",null,l!==pe.a&&Object(c.c)(Oe,Object.assign({name:"title",label:d("save-creation-label-title"),required:l===pe.b,onChange:D,autoComplete:"off",defaultValue:j},{errors:S,register:E})),s!==pe.a&&Object(c.c)(Oe,Object.assign({name:"presenter",label:d("save-creation-label-presenter"),required:s===pe.b,onChange:D,autoComplete:"off",defaultValue:g},{errors:S,register:E})),Object(c.c)(a.b,{title:d("save-creation-button-upload"),disabled:0===f.length,onClick:k(n)},Object(c.c)(y.a,{icon:w.B}),R)),Object(c.c)(a.a,{sx:{mt:2}},"error"===t.state&&Object(c.c)(te,{isDanger:!0},t.error)))},we=function(){var e,t,n=Object(u.h)(),i=Object(be.n)(),s=Object(C.a)().t,d=Object(de.a)(),b=Object(o.useState)(!1),p=Object(r.a)(b,2),O=p[0],f=p[1];if(Object(o.useEffect)((function(){if(!i.isReadyToUpload()&&!O&&d){var e=setTimeout(Object(_.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,i.refreshConnection();case 3:f(!1);case 4:case"end":return e.stop()}}),e)}))),5e3);return function(){return clearTimeout(e)}}})),i.isReadyToUpload())return null;switch(i.getState()){case be.g:e=s("save-creation-warn-unreachable"),t=s("save-creation-warn-once-reestablished");break;case be.d:if(i.isLoginProvided()){var j=document.referrer;e=Object(c.c)(ue.a,{i18nKey:"save-creation-warn-session-expired"},"Foo",j&&!j.includes(window.origin||"")?Object(c.c)(x.b.a,{href:j,target:"_blank",sx:{color:"#ff2"}},"bar"):Object(c.c)(o.Fragment,null,"bar"),"baz"),s("save-creation-warn-session-expired"),t=s("save-creation-warn-once-refreshed")}else e=Object(c.c)(ue.a,{i18nKey:"save-creation-warn-login-failed"},"Failed.",Object(c.c)(l.b,{to:{pathname:"/settings",search:n.search},sx:{variant:"styles.a",color:"#ff2"}},"settings")),t=s("save-creation-warn-once-logged-in");break;case be.h:case be.e:e=s("save-creation-warn-server-problem")+" "+s("save-creation-warn-download-hint");break;default:e="Internal error :-("}return Object(c.c)(te,{isDanger:!0},Object(c.c)("div",{sx:{textAlign:"center",fontSize:"40px",lineHeight:1.3}},O?Object(c.c)(a.j,{size:"40"}):Object(c.c)(y.a,{icon:w.m})),Object(c.c)("p",{sx:{mb:0}},e),t&&Object(c.c)("p",{sx:{mb:0}},t,t&&" ",s("save-creation-warn-download-hint")))},Se=function(e){var t,n=e.currentProgress,r=e.secondsLeft,i=Object(C.a)(),l=i.t,u=i.i18n,s=Math.min(100,100*n).toLocaleString(u.language,{minimumFractionDigits:1,maximumFractionDigits:1});return t=null===r?null:r<4?l("upload-time-a-few-seconds"):r<45?"".concat(r," ").concat(l("upload-time-seconds")):r<90?l("upload-time-a-minute"):r<2700?"".concat(Math.round(r/60)," ").concat(l("upload-time-minutes")):r<5400?l("upload-time-an-hour"):r<86400?"".concat(Math.round(r/3600)," ").concat(l("upload-time-hours")):null,Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{display:"flex",mb:2}},Object(c.c)(a.k,{variant:"text"},s,"%"),Object(c.c)("div",{sx:{flex:1}}),Object(c.c)(a.k,{variant:"text"},t&&Object(c.c)(ue.a,{i18nKey:"upload-time-left"},{time:t}," left"))),Object(c.c)(a.i,{max:1,value:n,variant:"styles.progress"},s),Object(c.c)(a.k,{variant:"text",sx:{textAlign:"center",mt:2}},l("upload-notification")))},ke=function(){var e=Object(C.a)().t;return Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"130px",color:"primary"}},Object(c.c)(y.a,{icon:w.f,size:"4x"})),Object(c.c)(a.k,{variant:"text",sx:{textAlign:"center"}},e("message-upload-complete")),Object(c.c)(a.k,{sx:{textAlign:"center",mt:2}},e("message-upload-complete-explanation")))},Ee=n(56),Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.deviceId&&{deviceId:Object(Ee.a)({},t?"exact":"ideal",e.deviceId)},r=Re(e.aspectRatio),c=r&&{aspectRatio:{ideal:r}},a=Ae(e.quality),o=a&&{height:{ideal:a}};return Object(b.a)(Object(b.a)(Object(b.a)({},n),c),o)},De=["4:3","16:9"],Re=function(e){return{"4:3":4/3,"16:9":16/9}[e]||null},Ae=function(e){return/^[0-9]+p$/.test(e)?parseInt(e):null},Te=function(){return{deviceId:window.localStorage.getItem("ocStudioLastVideoDevice"),aspectRatio:window.localStorage.getItem("ocStudioCameraAspectRatio")||"auto",quality:window.localStorage.getItem("ocStudioCameraQuality")||"auto"}},Ue=function(){return{quality:window.localStorage.getItem("ocStudioDisplayQuality")||"auto"}},Ie=function(e){var t=e.isDesktop,n=e.stream,a=h(),i=Object(pe.e)(),l=Object(o.useState)(0),u=Object(r.a)(l,2),s=u[0],d=u[1],p=K()({onResize:function(){var e;return d((null===(e=p.current)||void 0===e?void 0:e.offsetHeight)+4)}}).ref,O=t?Ue():Te(),f=function(e){var r=Object(b.a)(Object(b.a)({},O),e),c=Ce(r,!0);t?(window.localStorage.setItem("ocStudioDisplayQuality",r.quality),B(n,a),N(a,i,c)):(window.localStorage.setItem("ocStudioLastVideoDevice",r.deviceId),window.localStorage.setItem("ocStudioCameraAspectRatio",r.aspectRatio),window.localStorage.setItem("ocStudioCameraQuality",r.quality),V(n,a),M(a,i,c))};Object(o.useEffect)((function(){var e=Fe(n);!t&&e&&window.localStorage.setItem("ocStudioLastVideoDevice",e)}));var j=Object(o.useState)(!1),v=Object(r.a)(j,2),g=v[0],m=v[1];return Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{position:"absolute",top:g?"8px":"-30px",left:0,right:0,textAlign:"center",transition:"top 0.2s"}},Object(c.c)("span",{sx:{color:"gray.1",backgroundColor:"white",borderRadius:"10px",p:1,fontSize:"18px"}},Object(c.c)(Pe,{stream:n}))),Object(c.c)("div",{sx:{position:"absolute",left:0,right:0,bottom:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}},Object(c.c)("div",{sx:{textAlign:"right"}},Object(c.c)("div",{onClick:function(){return m((function(e){return!e}))},sx:{display:"inline-block",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",p:"6px",m:2,fontSize:"30px",lineHeight:"1em",borderRadius:"10px",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&:hover > svg":{transform:g?"none":"rotate(45deg)"}}},Object(c.c)(y.a,{icon:g?w.y:w.i,fixedWidth:!0,sx:{transition:g?"none":"transform 0.2s",width:"1em !important"}}))),Object(c.c)("div",{sx:{height:g?s||"auto":0,flex:"0 1 auto",transition:"height 0.2s",overflow:"hidden",backgroundColor:"white",fontSize:"18px",boxShadow:g?"0 0 15px rgba(0, 0, 0, 0.3)":"none"}},Object(c.c)("div",{sx:{border:function(e){return"1px solid ".concat(e.colors.gray[0])},height:"100%",overflow:"auto"}},Object(c.c)("div",{ref:p,sx:{p:1,pb:"2px"}},Object(c.c)("div",{sx:{display:"grid",width:"100%",gridTemplateColumns:"auto 1fr",gridGap:"6px 12px",p:1}},!t&&Object(c.c)(ze,{updatePrefs:f,prefs:O}),Object(c.c)(He,{isDesktop:t,updatePrefs:f,prefs:O,stream:n,settings:i})),Object(c.c)("div",{sx:{backgroundColor:"#ebebeb",m:2,py:1,px:2,fontSize:"16px",lineHeight:"20px",border:function(e){return"1px solid ".concat(e.colors.gray[2])}}},Object(c.c)(ue.a,{i18nKey:"sources-video-preferences-note"},Object(c.c)("strong",null,"Note:")," Explanation.")))))))},Pe=function(e){var t,n,r=e.stream,c=null===r||void 0===r||null===(t=r.getVideoTracks())||void 0===t||null===(n=t[0])||void 0===n?void 0:n.getSettings(),a=c&&c.width&&c.height?"".concat(c.width,"\xd7").concat(c.height):"",o=c&&c.frameRate?"".concat(c.frameRate," fps"):"";return c?[a,o].join(", "):"..."},_e=function(e){var t=e.children;return Object(c.c)("div",{sx:{gridColumn:"0 1",display:"flex",flexDirection:"column",justifyContent:"center",hyphens:"auto"}},t)},Le=function(e){var t=e.children;return Object(c.c)("div",{sx:{gridColumn:"1 2",overflowX:"auto",lineHeight:"30px"}},t)},He=function(e){var t,n,a,i=e.isDesktop,l=e.updatePrefs,u=e.prefs,s=e.stream,d=e.settings,b=Object(C.a)().t,O=function(e){return l({quality:e})},f=function(e){var t=[360,480,720,1080,1440,2160].filter((function(t){return!e||t<=e}));return!e||0!==t.length&&t[t.length-1]===e||t.push(e),t.map((function(e){return"".concat(e,"p")}))}(i?null===(t=d.display)||void 0===t?void 0:t.maxHeight:null===(n=d.camera)||void 0===n?void 0:n.maxHeight),j=i?"desktop":"user",v=Object(p.b)(s),g=Object(r.a)(v,2)[1];if(g&&f.includes(u.quality)){var h=parseInt(u.quality);a=h===g?"ok":"warn"}return Object(c.c)(o.Fragment,null,Object(c.c)(_e,null,b("sources-video-quality"),"*:"),Object(c.c)(Le,null,Object(c.c)(Ne,{id:"quality-auto-".concat(j),value:"auto",name:"quality-".concat(j),label:b("sources-video-quality-auto"),onChange:O,checked:f.every((function(e){return u.quality!==e}))}),f.map((function(e){return Object(c.c)(o.Fragment,{key:"".concat(e,"-").concat(j)},Object(c.c)("wbr",null),Object(c.c)(Ne,{id:"quality-".concat(e,"-").concat(j),value:e,name:"quality-".concat(j),onChange:O,checked:u.quality===e,state:a}))}))))},ze=function(e){var t,n=e.updatePrefs,a=e.prefs,i=Object(C.a)().t,l=m(),u=Fe(l.userStream),s=Object(p.c)(l.mediaDevices,"videoinput"),d=Object(p.b)(l.userStream),b=Object(r.a)(d,2),O=b[0],f=b[1];if(O&&f&&De.includes(a.aspectRatio)){var j=O/f,v=Re(a.aspectRatio);t=.97*v<j&&j<v/.97?"ok":"warn"}var g=function(e){return n({aspectRatio:e})};return Object(c.c)(o.Fragment,null,Object(c.c)(_e,null,i("sources-video-device"),":"),Object(c.c)(Le,null,Object(c.c)("select",{sx:{variant:"styles.select"},value:u,onChange:function(e){return t=e.target.value,n({deviceId:t});var t}},s.map((function(e,t){return Object(c.c)("option",{key:t,value:e.deviceId},e.label)})))),Object(c.c)(_e,null,i("sources-video-aspect-ratio"),"*:"),Object(c.c)(Le,null,Object(c.c)(Ne,{id:"ar-auto",value:"auto",name:"aspectRatio",label:i("sources-video-aspect-ratio-auto"),onChange:g,checked:De.every((function(e){return a.aspectRatio!==e}))}),De.map((function(e){return Object(c.c)(o.Fragment,{key:"ar-".concat(e)},Object(c.c)("wbr",null),Object(c.c)(Ne,{id:"ar-".concat(e),value:e,name:"aspectRatio",onChange:g,checked:a.aspectRatio===e,state:t}))}))))},Ne=function(e){var t=e.id,n=e.value,r=e.checked,a=e.name,i=e.onChange,l=e.label,u=e.state;return Object(c.c)(o.Fragment,null,Object(c.c)("input",Object.assign({type:"radio",onChange:function(e){return i(e.target.value)}},{id:t,value:n,checked:r,name:a},{sx:{display:"none","&+label":{border:function(e){return"2px solid ".concat(e.colors.gray[0])},p:"1px 4px",borderRadius:"6px",mx:1},"&:checked+label":{bg:"gray.0",color:u?{warn:"#ffe300",ok:"#51d18f"}[u]:"white",fontWeight:"bold"}}})),Object(c.c)("label",{htmlFor:t},l||n))},Fe=function(e){var t,n,r;return null===e||void 0===e||null===(t=e.getVideoTracks())||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.getSettings())||void 0===r?void 0:r.deviceId},Me=function(e){var t,n=e.warnings,r=e.inputs;switch(r.length){case 1:t=[{body:Object(c.c)(We,{input:r[0]}),dimensions:function(){return Object(p.b)(r[0].stream)}}];break;case 2:t=[{body:Object(c.c)(We,{input:r[0]}),dimensions:function(){return Object(p.b)(r[0].stream)}},{body:Object(c.c)(We,{input:r[1]}),dimensions:function(){return Object(p.b)(r[1].stream)}}];break;default:return Object(c.c)("p",null,"Something went very wrong")}return Object(c.c)(o.Fragment,null,n,Object(c.c)(ee,{minWidth:300,gap:20},t))},We=function(e){var t=e.input;e.text;return Object(c.c)(a.c,{sx:{height:"100%",overflow:"hidden"}},Object(c.c)(qe,{input:t}),Object(c.c)(Ie,{isDesktop:t.isDesktop,stream:t.stream}))},qe=function(e){var t,n=e.input,r=n.allowed,i=n.stream,l=n.unexpectedEnd,u=$(),s=Object(o.useRef)();return Object(o.useEffect)((function(){var e=s.current;return e&&(e.srcObject||(e.srcObject=i),e.addEventListener("resize",u)),function(){e&&e.removeEventListener("resize",u)}}),[i,u]),i?Object(c.c)("video",{ref:s,autoPlay:!0,muted:!0,sx:{minHeight:0,display:"block",width:"100%",height:"100%"}}):(t=!1===r||l?Object(c.c)(y.a,{icon:w.m,size:"3x"}):Object(c.c)(a.j,{size:"75"}),Object(c.c)("div",{sx:{width:"100%",height:"100%",minHeight:"120px",display:"flex",justifyContent:"center",alignItems:"center"}},t))};function Be(e){var t,n,r,o=e.nextStep,i=e.userHasWebcam,l=Object(C.a)().t,u=h(),s=m(),d=s.displayStream,b=s.userStream,p=s.videoChoice,O=function(e){return u({type:"CHOOSE_VIDEO",payload:e})},f="none"===p||"both"===p?!d||!b:!(d||b),j=!1===s.userAllowed&&Object(c.c)(te,{key:"user-stream-warning",isDanger:!0},Object(c.c)(a.f,{as:"h3",mb:2},l("source-user-not-allowed-title")),Object(c.c)(a.k,null,l("source-user-not-allowed-text"))),v=!1===s.displayAllowed&&Object(c.c)(te,{key:"display-stream-warning",isDanger:!0},Object(c.c)(a.f,{as:"h3",mb:2},l("source-display-not-allowed-title")),Object(c.c)(a.k,null,l("source-display-not-allowed-text"))),g=(s.userUnexpectedEnd||s.displayUnexpectedEnd)&&Object(c.c)(te,{key:"unexpexted-stream-end-warning",isDanger:!0},Object(c.c)(a.k,null,l("error-lost-video-stream"))),y={isDesktop:!1,stream:b,allowed:s.userAllowed,unexpectedEnd:s.userUnexpectedEnd},w={isDesktop:!0,stream:d,allowed:s.displayAllowed,unexpectedEnd:s.displayUnexpectedEnd};switch(p){case"none":var S=Ce(Te()),k=Ce(Ue());n=l("sources-video-question"),t=!0,r=Object(c.c)(Ve,{setActiveSource:O,userConstraints:S,displayConstraints:k,userHasWebcam:i});break;case"user":n=l("sources-video-user-selected"),t=!b&&!1!==s.userAllowed,r=Object(c.c)(Me,{warnings:[j,g],inputs:[y]});break;case"display":n=l("sources-video-display-selected"),t=!d&&!1!==s.displayAllowed,r=Object(c.c)(Me,{warnings:[v,g],inputs:[w]});break;case"both":n=l("sources-video-display-and-user-selected"),t=!b&&!1!==s.userAllowed||!d&&!1!==s.displayAllowed,r=Object(c.c)(Me,{warnings:[v,j,g],inputs:[w,y]});break;default:return console.error("bug: active source has an unexpected value"),Object(c.c)("p",null,"Something went very wrong (internal error) :-(")}var E=t&&!s.userUnexpectedEnd&&!s.displayUnexpectedEnd;return Object(c.c)(Q,null,Object(c.c)(x.b.h1,null,n),r,"none"!==p&&Object(c.c)("div",{sx:{mb:3}}),"none"!==p&&Object(c.c)(J,{next:t?null:{onClick:function(){return o()},disabled:f},prev:E?null:{onClick:function(){O("none"),V(b,u),B(d,u)},disabled:!1,label:"sources-video-reselect-source"}}))}var Ve=function(e){var t=e.setActiveSource,n=e.userConstraints,r=e.displayConstraints,o=e.userHasWebcam,l=Object(C.a)().t,u=Object(pe.e)(),s=h(),d=m(),b=d.displaySupported,O=d.userSupported,f=function(){var e=Object(_.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("user"),e.next=3,M(s,u,n);case 3:return e.next=5,Object(p.i)(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(_.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("display"),e.next=3,N(s,u,r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(_.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("both"),e.next=3,M(s,u,n);case 3:return e.next=5,Promise.all([Object(p.i)(s),N(s,u,r)]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b||O?Object(c.c)(i.a.Fragment,null,Object(c.c)(Ke,null),Object(c.c)(a.e,{sx:{flexDirection:["column","row"],maxWidth:[270,850],width:"100%",mx:["auto","none"],mb:3,flex:"4 1 auto",maxHeight:["none","270px"],justifyContent:"center","& > :not(:last-of-type)":{mb:[3,0],mr:[0,3]}}},(b||!Object(p.g)())&&Object(c.c)(Ge,{label:l("sources-scenario-display"),icon:w.d,onClick:j,disabledText:!b&&l("sources-video-display-not-supported")}),(b||!Object(p.g)())&&O&&Object(c.c)(Ge,{label:l("sources-scenario-display-and-user"),icon:w.e,onClick:v,disabledText:b?!o&&l("sources-video-no-cam-detected"):l("sources-video-display-not-supported")}),O&&Object(c.c)(Ge,{label:l("sources-scenario-user"),icon:w.C,onClick:f,disabledText:!o&&l("sources-video-no-cam-detected")})),Object(c.c)(Ke,null)):Object(c.c)(te,{isDanger:!0},l("sources-video-none-available"))},Ge=function(e){var t=e.icon,n=e.label,r=e.onClick,a=e.disabledText,o=void 0!==a&&a,i=!1!==o;return Object(c.c)("button",{onClick:r,disabled:i,title:n,sx:{fontFamily:"inherit",color:i?"gray.2":"gray.0",border:function(e){return"2px solid ".concat(i?e.colors.gray[2]:"black")},backgroundColor:"gray.4",borderRadius:"8px",flex:["1 1 auto","0 1 100%"],minWidth:"180px",maxWidth:"300px",minHeight:"120px",maxHeight:"250px",p:2,"&:hover":i?{}:{boxShadow:function(e){return"0 0 10px ".concat(e.colors.gray[2])},backgroundColor:"white"}}},Object(c.c)("div",{sx:{display:"block",textAlign:"center",mb:3}},Object(c.c)(y.a,{icon:t,size:"3x"})),Object(c.c)("div",{sx:{fontSize:4}},n),Object(c.c)("div",{sx:{fontSize:2,mt:1}},o))},Ke=function(e){return Object(c.c)("div",Object.assign({sx:{flex:"1 0 0"}},e))};function Xe(e){var t=e.recordingState,n=Object(C.a)().t,r=m(),a=r.displayStream,o=r.userStream,i=r.displayUnexpectedEnd,l=r.userUnexpectedEnd,u=t===St,s=[];return(a||i)&&s.push({body:Object(c.c)(Ye,{title:n("share-desktop"),stream:a,paused:u}),dimensions:function(){return Object(p.b)(a)}}),(o||l)&&s.push({body:Object(c.c)(Ye,{title:n("share-camera"),stream:o,paused:u}),dimensions:function(){return Object(p.b)(o)}}),Object(c.c)(ee,{gap:20},s)}function Ye(e){e.title;var t=e.stream,n=e.paused,r=$(),a=Object(o.useRef)();return Object(o.useEffect)((function(){var e=a.current;if(e&&t)return e.srcObject||(e.srcObject=t),e.addEventListener("resize",r),n?e.pause():e.play(),function(){return e.removeEventListener("resize",r)}})),t?Object(c.c)("div",{sx:{position:"relative",backgroundColor:"gray.3",boxShadow:"0 2px 2px rgba(0, 0, 0, 0.35)",overflow:"hidden",height:"100%",cursor:t?"initial":"pointer"}},n&&Object(c.c)("div",{sx:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.5)"}},Object(c.c)(y.a,{icon:w.r,sx:{fontSize:"140px",maxWidth:"40%",maxHeight:"40%",position:"absolute",top:0,left:0,bottom:0,right:0,margin:"auto",animation:"3s ease-in-out infinite none pulse"}})),Object(c.c)("video",{ref:a,autoPlay:!0,muted:!0,sx:{outline:"none",width:"100%",height:"100%",background:"transparent"}})):Object(c.c)("div",{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},Object(c.c)(y.a,{icon:w.m,size:"3x"}))}var Qe=n(13),Je=n(36),Ze=n(1),$e=n(17),et=Object($e.a)("recorder"),tt=Object($e.a)("data"),nt=Object($e.a)("dimensions"),rt=Object($e.a)("reset"),ct=Object($e.a)("onDataAvailable"),at=Object($e.a)("onStop"),ot=function(){function e(t,n){var r,c=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Qe.a)(this,e),Object.defineProperty(this,et,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,rt,{writable:!0,value:function(){Object(Ze.a)(c,tt)[tt]=[]}}),Object.defineProperty(this,ct,{writable:!0,value:function(e){e.data.size>0?Object(Ze.a)(c,tt)[tt].push(e.data):console.log("Recording data has size 0!",e)}}),Object.defineProperty(this,at,{writable:!0,value:function(e){var t,n,r=(null===(t=Object(Ze.a)(c,tt)[tt][0])||void 0===t?void 0:t.type)||Object(Ze.a)(c,et)[et].mimeType,a=new Blob(Object(Ze.a)(c,tt)[tt],{type:r}),o=URL.createObjectURL(a);Object(Ze.a)(c,rt)[rt](),null===(n=c.onStop)||void 0===n||n.call(c,{url:o,media:a,mimeType:r,dimensions:Object(Ze.a)(c,nt)[nt]})}}),"isTypeSupported"in MediaRecorder?(r=((null===n||void 0===n?void 0:n.mimes)||[]).find((function(e){return MediaRecorder.isTypeSupported(e)})))?console.debug("using first supported MIME type from settings: ",r):(null===n||void 0===n?void 0:n.mimes)&&console.debug("None of the MIME types specified in settings are supported by this `MediaRecorder`"):(null===n||void 0===n?void 0:n.mimes)&&console.debug("MIME types were specified, but `MediaRecorder.isTypeSupported` is not supported by your browser"),Object(Ze.a)(this,rt)[rt](),Object(Ze.a)(this,nt)[nt]=Object(p.b)(t);var o=null===n||void 0===n?void 0:n.videoBitrate;this.onStop=a.onStop,Object(Ze.a)(this,et)[et]=new MediaRecorder(t,{mimeType:r,videoBitsPerSecond:o}),Object(Ze.a)(this,et)[et].ondataavailable=Object(Ze.a)(this,ct)[ct],Object(Ze.a)(this,et)[et].onstop=Object(Ze.a)(this,at)[at]}return Object(Je.a)(e,[{key:"start",value:function(){Object(Ze.a)(this,et)[et].start()}},{key:"pause",value:function(){Object(Ze.a)(this,et)[et].pause()}},{key:"resume",value:function(){Object(Ze.a)(this,et)[et].resume()}},{key:"stop",value:function(){Object(Ze.a)(this,et)[et].stop()}}]),e}(),it=function(e){var t=e.large,n=Object(E.a)(e,["large"]);return Object(c.c)("button",Object.assign({sx:{backgroundColor:"transparent",border:"none",position:"relative",overflow:"hidden",my:0,mx:t?"15px":0,padding:0,fontSize:t?"5rem":"3.5rem",lineHeight:t?"5rem":"3.5rem",svg:{margin:0,padding:0,outline:"none"}}},n))},lt=function(e){return Object(c.c)(it,{onClick:e.onClick,title:e.title},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(y.a,{icon:w.s})))},ut=function(e){return Object(c.c)(it,{onClick:e.onClick,title:e.title,large:e.large?1:0,disabled:e.disabled||e.countdown,sx:{color:"#bd181c","svg + svg":{color:"#e22319"},":disabled":{color:"#aaa"},":disabled svg + svg":{color:"#bbb"}}},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(y.a,{icon:e.countdown?w.h:w.g,spin:e.countdown}),Object(c.c)(y.a,{icon:w.g,transform:"shrink-6"})))},st=function(e){return Object(c.c)(it,{onClick:e.onClick,title:e.title},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(y.a,{icon:w.v})))},dt=function(e){return Object(c.c)(it,{onClick:e.onClick,title:e.title,large:!!e.large,sx:{color:"#bd181c"}},Object(c.c)(y.a,{icon:w.x}))},bt=n(61),pt=n(21),Ot=n(23),ft=Object($e.a)("last"),jt=Object($e.a)("timerID"),vt=Object($e.a)("isMounted"),gt=function(e){Object(pt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(Qe.a)(this,n),r=t.call(this,e),Object.defineProperty(Object(bt.a)(r),ft,{writable:!0,value:null}),Object.defineProperty(Object(bt.a)(r),jt,{writable:!0,value:null}),Object.defineProperty(Object(bt.a)(r),vt,{writable:!0,value:!1}),r.state={milliseconds:0},Object(Ze.a)(Object(bt.a)(r),ft)[ft]=new Date,Object(Ze.a)(Object(bt.a)(r),jt)[jt]=setInterval((function(){return r.tick()}),100),r}return Object(Je.a)(n,[{key:"componentDidMount",value:function(){Object(Ze.a)(this,vt)[vt]=!0}},{key:"componentWillUnmount",value:function(){this.stopTimer(),Object(Ze.a)(this,vt)[vt]=!1}},{key:"resumeTimer",value:function(){var e=this;this.timerId||(Object(Ze.a)(this,jt)[jt]=setInterval((function(){return e.tick()}),100),Object(Ze.a)(this,ft)[ft]=new Date)}},{key:"stopTimer",value:function(){clearInterval(Object(Ze.a)(this,jt)[jt]),Object(Ze.a)(this,jt)[jt]=null}},{key:"componentDidUpdate",value:function(e){this.props.isPaused!==e.isPaused&&(this.props.isPaused?this.stopTimer():this.resumeTimer())}},{key:"tick",value:function(){if(Object(Ze.a)(this,vt)[vt]){var e=new Date,t=e-Object(Ze.a)(this,ft)[ft];Object(Ze.a)(this,ft)[ft]=e,this.setState((function(e){return{milliseconds:e.milliseconds+t}}))}}},{key:"render",value:function(){var e=this.state.milliseconds,t=[e/36e5>>0,(e/6e4>>0)%60,(e/1e3>>0)%60];0===t[0]&&(t=t.slice(1));var n=t.map((function(e){return(e<10?"0":"")+e})).join(":");return Object(c.c)("span",{sx:{fontSize:3}},n)}}]),n}(o.Component);function ht(e,t){return function(n){var r=n.media,c=n.url,a=n.mimeType,o=n.dimensions;e({type:"ADD_RECORDING",payload:{deviceType:t,media:r,url:c,mimeType:a,dimensions:o}})}}function mt(e,t){return(null===e||void 0===e?void 0:e.getAudioTracks().length)?new MediaStream([].concat(Object(d.a)(t.getVideoTracks()),Object(d.a)(e.getAudioTracks()))):t}var xt=[];function yt(e){var t=e.handleRecorded,n=e.recordingState,r=e.setRecordingState,a=Object(C.a)().t,i=h(),l=Object(pe.e)(),d=m(),b=d.audioStream,p=d.displayStream,O=d.userStream,f=d.userUnexpectedEnd,j=d.displayUnexpectedEnd,v=d.audioUnexpectedEnd,g=Object(o.useRef)(null),x=Object(o.useRef)(null),y=(p||O)&&!f&&!j&&!v,w=Object(u.g)(),S=function(){var e,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=g.current)||void 0===e||e.stop(),null===(n=x.current)||void 0===n||n.stop(),t(),i({type:r?"STOP_RECORDING_PREMATURELY":"STOP_RECORDING"}),xt.forEach((function(e){return e()})),xt=[]};Object(o.useEffect)((function(){(f||j||v)&&n===kt&&S(!0),w.listen((function(){"STATE_INACTIVE"!==n&&i({type:"STOP_RECORDING"}),xt.forEach((function(e){return e()})),xt=[]}))}));return Object(c.c)("div",{sx:{m:0,width:n!==wt?"280px":"auto"}},n!==wt&&Object(c.c)(s.a,{onBeforeunload:function(e){return e.preventDefault()}}),Object(c.c)("div",{className:"buttons",sx:{display:"flex",alignItems:"center"}},n!==wt&&Object(c.c)("div",{sx:{flex:1,textAlign:"right"}},n===kt&&Object(c.c)(lt,{title:a("pause-button-title"),recordingState:n,onClick:function(){r(St),function(){var e,t;null===(e=g.current)||void 0===e||e.pause(),null===(t=x.current)||void 0===t||t.pause()}()}}),n===St&&Object(c.c)(st,{title:a("resume-button-title"),recordingState:n,onClick:function(){r(kt),function(){var e,t;null===(e=g.current)||void 0===e||e.resume(),null===(t=x.current)||void 0===t||t.resume()}()}})),Object(c.c)("div",{className:"center"},n===wt?Object(c.c)(ut,{large:!0,title:a("record-button-title"),recordingState:n,onClick:function(){y&&(r(kt),function(){if(i({type:"CLEAR_RECORDINGS"}),p){var e=ht(i,"desktop"),t=mt(b,p);g.current=new ot(t,l.recording,{onStop:e}),g.current.start()}if(O){var n=ht(i,"video"),r=mt(b,O);x.current=new ot(r,l.recording,{onStop:n}),x.current.start()}i({type:"START_RECORDING"}),xt.push(w.block(a("confirm-cancel-recording")))}())},disabled:!y}):Object(c.c)(dt,{large:!0,title:a("stop-button-title"),recordingState:n,onClick:function(){r(wt),S()}})),n!==wt&&Object(c.c)("div",{sx:{flex:1}},Object(c.c)(gt,{isPaused:n===St}))))}var wt="inactive",St="paused",kt="recording";function Et(e){var t=Object(C.a)().t,n=m(),i=h(),l=Object(be.n)(),u=Object(o.useState)(wt),s=Object(r.a)(u,2),d=s[0],b=s[1],p=Object(o.useCallback)((function(){e.previousStep()}),[e]);return Object(c.c)(a.e,{sx:{flexDirection:"column",height:"100%",position:"relative",flexGrow:1}},(n.displayUnexpectedEnd||n.userUnexpectedEnd)&&Object(c.c)(te,{isDanger:!0},Object(c.c)(a.k,null,t("error-lost-video-stream"))),n.audioUnexpectedEnd&&Object(c.c)(te,{isDanger:!0},Object(c.c)(a.k,null,t("error-lost-audio-stream"))),Object(c.c)(Xe,{recordingState:d}),Object(c.c)("div",{sx:{m:3}},Object(c.c)(J,{prev:d===wt&&{onClick:p}},Object(c.c)(yt,{handleRecorded:function(){l.refreshConnection(),function(e,t){var n=e.audioStream,r=e.displayStream,c=e.userStream;q(n,t),B(r,t),V(c,t)}(n,i),e.nextStep()},recordingState:d,setRecordingState:b}))))}function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dt(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Rt=i.a.createElement("path",{d:"m24.6 0c-0.447 0-0.894 0.171-1.24 0.511l-3.07 3.05c-0.685 0.681-0.685 1.78 0 2.46l58.8 58.5c0.685 0.681 1.79 0.681 2.47 0l3.07-3.05c0.685-0.681 0.685-1.78 0-2.46l-6.68-6.64h22v-7.32h-15.6c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h15.6v-7.32h-56.4l-17.8-17.7c-0.343-0.341-0.79-0.511-1.24-0.511zm-24.6 18.2v7.32h3.7c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-3.7v7.32h55.8l-15.4-15.3v5.36c0 1.43-1.16 2.59-2.6 2.59h-21.8c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h12.8l-7.36-7.32zm51 7.32h21c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-1.4z",fill:"currentColor"}),At=function(e){var t=e.svgRef,n=e.title,r=Dt(e,["svgRef","title"]);return i.a.createElement("svg",Ct({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 100 65",ref:t},r),n?i.a.createElement("title",null,n):null,Rt)},Tt=i.a.forwardRef((function(e,t){return i.a.createElement(At,Ct({svgRef:t},e))}));n.p;function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function It(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Pt=i.a.createElement("g",{fill:"currentColor"},i.a.createElement("path",{d:"m49.7 0.00188c-2.91 0.0589-5.75 1.49-7.44 4.08-1.06 1.62-1.51 3.48-1.42 5.29-0.0794 0.122-0.986 1.51-1.13 1.72-0.13-0.2-0.997-1.54-1.08-1.66 0.0951-1.81-0.348-3.67-1.4-5.29-1.68-2.59-4.51-4.04-7.42-4.11-1.75-0.0426-3.52 0.41-5.09 1.41-4.18 2.66-5.4 8.27-2.72 12.4 2.56 3.96 7.83 5.24 11.9 3.02l0.992 1.53c-2.84 4.35-4.9 7.5-6.74 10.3-3.09 4.73-1.94 8.93 2.01 11.5l9.47-14.5 9.45 14.6c3.96-2.55 5.13-6.75 2.06-11.5-1.84-2.84-3.9-6.03-6.74-10.4l1.04-1.59c4.1 2.23 9.37 0.974 12-2.97 2.03-3.1 1.85-7.03-0.114-9.93-0.656-0.968-1.51-1.82-2.55-2.49-1.56-1.01-3.33-1.47-5.08-1.43zm0.0903 5.96c0.578-0.0076 1.17 0.154 1.7 0.499 0.357 0.23 0.649 0.514 0.872 0.835 0.668 0.962 0.712 2.24 0.0174 3.31-0.926 1.42-2.74 1.8-4.17 0.882-1.43-0.919-1.82-2.73-0.889-4.14 0.579-0.886 1.51-1.37 2.47-1.38zm-20.1 0.0236c0.963 0.0168 1.89 0.504 2.46 1.39 0.92 1.42 0.525 3.22-0.906 4.14s-3.25 0.521-4.17-0.9c-0.92-1.42-0.525-3.22 0.906-4.14 0.537-0.343 1.13-0.502 1.71-0.492zm10 24.1a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm0 10.9a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm-1.5 8.8a2.43 2.42 0 0 0-2.43 2.42v35.4a2.43 2.42 0 0 0 2.43 2.42h8.94v-4.83h-6.51v-30.6h6.1v-4.83zm6.51 8.86v22.5h55.2v-4.83h-3.22c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.767-1.71 1.72-1.71h3.22v-4.83zm6.59 4.83h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.767 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.767-1.71 1.72-1.71zm22.7 0h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.767 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.769-1.71 1.72-1.71z"}),i.a.createElement("path",{d:"m0 58.6v4.83h2.44c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.768 1.71-1.72 1.71h-2.44v4.83h31.8v-22.5zm10.8 4.83h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.768 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.762-1.72-1.71v-9.47c0-0.946 0.768-1.71 1.72-1.71z",opacity:.2})),_t=function(e){var t=e.svgRef,n=e.title,r=It(e,["svgRef","title"]);return i.a.createElement("svg",Ut({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 100 90",ref:t},r),n?i.a.createElement("title",null,n):null,Pt)},Lt=i.a.forwardRef((function(e,t){return i.a.createElement(_t,Ut({svgRef:t},e))}));n.p;function Ht(e){var t=Object(C.a)().t,n=h(),i=m(),l=i.recordings,u=i.prematureRecordingEnd,s=i.videoChoice,d=l.some((function(e){return 0===e.media.size})),b=Object(o.useRef)(),p=Object(o.useState)(0),O=Object(r.a)(p,2),f=O[0],j=O[1],v=Object(o.useState)(),g=Object(r.a)(v,2),y=g[0],w=g[1],S=function(){switch(s){case"none":return 0;case"both":return 2;default:return 1}}();return Object(c.c)(Q,null,Object(c.c)(x.b.h1,null,t("review-heading")),u&&Object(c.c)(te,{isDanger:!0},Object(c.c)(a.k,null,t("error-lost-stream-end-recording"))),d&&Object(c.c)(te,{isDanger:!0},t("review-error-empty-recording")),(!y||l.length!==S)&&Object(c.c)("div",{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},Object(c.c)(a.j,{title:t("save-creation-waiting-for-recordings")})),l.length===S&&Object(c.c)("div",{sx:y?{display:"flex",flex:"1 1 auto",flexDirection:"column"}:{display:"none"}},Object(c.c)(Wt,{ref:b,onTimeUpdate:function(e){j(e.target.currentTime)},onReady:function(){return w(!0)}}),Object(c.c)("div",{sx:{mb:3}}),Object(c.c)(zt,{previewController:b,currentTime:f})),Object(c.c)("div",{sx:{mb:3}}),Object(c.c)(J,{prev:{onClick:function(){window.confirm(t("confirm-discard-recordings"))&&(n({type:"RESET"}),e.firstStep())},danger:!0,label:"review-button-discard-and-record"},next:{onClick:function(){e.nextStep()}}}))}var zt=function(e){var t=e.previewController,n=e.currentTime;return Object(c.c)("div",{sx:{backgroundColor:"gray.4",borderRadius:"8px"}},Object(c.c)(Ft,{previewController:t,currentTime:n}),Object(c.c)(Nt,{previewController:t,currentTime:n}))},Nt=function(e){var t,n=e.previewController,r=e.currentTime,a=(null===(t=n.current)||void 0===t?void 0:t.duration)||1/0,o=m(),i=o.start,l=o.end,u=function(e){var t=e.target.getBoundingClientRect(),r=(e.clientX-t.x)/t.width;r<0?r=0:r>1&&(r=1),n.current&&(n.current.currentTime=r*a)},s={position:"absolute",backgroundColor:"gray.3",height:"100%",boxSizing:"content-box"};return Object(c.c)("div",{sx:{p:2}},Object(c.c)("div",{sx:{py:1,position:"relative"}},Object(c.c)("div",{onClick:function(e){return u(e)},onMouseMove:function(e){1===e.buttons&&u(e)},sx:{position:"absolute",width:"100%",height:"100%",cursor:"pointer",top:0,zIndex:10}}),Object(c.c)("div",{sx:{position:"relative",backgroundColor:"#6bc295",height:"12px",width:"100%",borderRadius:"6px",overflow:"hidden","@media not (any-pointer: fine)":{height:"20px",borderRadius:"10px"}}},null!=i&&i>0&&Object(c.c)("div",{sx:Object(b.a)({left:0,borderRight:"2px solid black",width:"".concat(i/a*100,"%")},s)}),null!=l&&l<a&&Object(c.c)("div",{sx:Object(b.a)({right:0,borderLeft:"2px solid black",width:"".concat((a-l)/a*100,"%")},s)}),Object(c.c)("div",{sx:{position:"absolute",left:0,width:"".concat(r/a*100,"%"),backgroundColor:"black",height:"100%",opacity:.3}}))))},Ft=function(e){var t,n,r,o,i,l=e.currentTime,u=e.previewController,s=m(),d=s.start,b=s.end,p=h(),O=Object(pe.e)(),f=Object(C.a)().t,j=null===(t=u.current)||void 0===t?void 0:t.duration;return Object(c.c)("div",{sx:{textAlign:"center"}},Object(c.c)(a.e,{sx:{p:2,justifyContent:"center",alignItems:"flex-end","& > *":{mx:2}}},(null===(n=O.review)||void 0===n?void 0:n.disableCutting)||Object(c.c)(Mt,Object.assign({marker:"start",value:d,control:b,invariant:function(e,t){return e<t}},{recordingDispatch:p,previewController:u,currentTime:l})),Object(c.c)("button",{title:(null===(r=u.current)||void 0===r?void 0:r.isPlaying)?f("review-pause"):f("review-play"),sx:{backgroundColor:"transparent",border:"none",mx:3},onClick:function(){var e=u.current;e&&(e.isPlaying?e.pause():e.isReadyToPlay&&e.play())}},Object(c.c)(y.a,{icon:(null===(o=u.current)||void 0===o?void 0:o.isPlaying)?w.r:w.u,sx:{fontSize:"50px",opacity:.8,"&:hover":{opacity:1}}})),(null===(i=O.review)||void 0===i?void 0:i.disableCutting)||Object(c.c)(Mt,Object.assign({marker:"end",value:b,control:d,invariant:function(e,t){return t<e}},{recordingDispatch:p,previewController:u,currentTime:l}))),f("review-player-progress",{currentTime:l,duration:j}))},Mt=function(e){var t=e.marker,n=e.value,r=e.control,i=e.invariant,l=e.currentTime,u=e.previewController,s=e.recordingDispatch,d=Object(C.a)().t,b=Object(c.c)("div",{sx:{flex:1,textAlign:"start"===t?"right":"left"}},null!==n&&Object(c.c)(o.Fragment,null,Object(c.c)(ue.a,Object.assign({t:d},{i18nKey:"review-".concat(t)}),Object(Ee.a)({},t,n)," ",Object(c.c)(a.h,{href:"",onClick:function(e){e.preventDefault(),u.current.currentTime=n}})),Object(c.c)(a.g,{title:d("review-remove-cut-point",{context:t}),onClick:function(){return s({type:"UPDATE_".concat(t.toUpperCase()),payload:null})}},Object(c.c)(y.a,{icon:w.A})))),p=function(){var e;return l<=.001||l>=(null===(e=u.current)||void 0===e?void 0:e.duration)||null!=r&&!i(l,r)}(),O=Object(c.c)("button",Object.assign({title:d("review-set-".concat(t))},{disabled:p},{onClick:function(){var e=u.current.currentTime;null==r||i(e,r)||(e=r),s({type:"UPDATE_".concat(t.toUpperCase()),payload:e})},sx:{backgroundColor:"transparent",border:"none",pt:"4px",px:"8px",borderRadius:"4px","&:disabled":{opacity:.4},"&:not(:disabled):hover":{backgroundColor:"#ddd"}}}),Object(c.c)(Lt,{sx:{height:"32px",transform:"end"===t?"scaleX(-1)":""}}));return"start"===t?Object(c.c)(o.Fragment,null,b,O):Object(c.c)(o.Fragment,null,O,b)},Wt=Object(o.forwardRef)((function(e,t){var n,a=e.onTimeUpdate,i=e.onReady,l=m(),u=l.recordings,s=l.start,d=l.end,b=Object(C.a)().t,p=[Object(o.useRef)(),Object(o.useRef)()],O=p.slice(0,u.length),f=2===u.length?"desktop"===u[0].deviceType?0:1:null,j=Object(o.useRef)();Object(o.useImperativeHandle)(t,(function(){return{get currentTime(){return p[j.current||0].current.currentTime},set currentTime(e){O.forEach((function(t){return t.current.currentTime=e}))},get duration(){var e;return null===(e=p[j.current||0].current)||void 0===e?void 0:e.duration},get isPlaying(){var e=p[j.current||0].current;return e&&e.currentTime>0&&!e.paused&&!e.ended},get isReadyToPlay(){return O.every((function(e){return e.current.readyState>=2}))},play:function(){O.forEach((function(e){return e.current.play()}))},pause:function(){O.forEach((function(e){return e.current.pause()}))}}}));var v=[Object(o.useRef)(),Object(o.useRef)()],g=Object(o.useState)(),h=Object(r.a)(g,2),x=h[0],y=h[1],w=function(e){return null!==s&&e<s||null!==d&&e>d},S=(null===(n=p[j.current||0].current)||void 0===n?void 0:n.currentTime)||0,k=w(S),E=Object(o.useState)(k),D=Object(r.a)(E,2)[1];Object(o.useEffect)((function(){x&&i()}),[i,x]),Object(o.useEffect)((function(){if(x&&2===u.length){p[f].current.volume=0;var e,t=p[0].current,n=p[1].current,r=0;return e=window.requestAnimationFrame((function c(){if(r%60===0&&(Math.abs(t.currentTime-n.currentTime)>.15&&null!=j.current)){var a=p[j.current].current;p[0===j.current?1:0].current.currentTime=a.currentTime}r++,e=window.requestAnimationFrame(c)})),function(){return window.cancelAnimationFrame(e)}}}));var R=u.map((function(e,t){return{body:Object(c.c)("div",{sx:{position:"relative",width:"100%",height:"100%"}},k&&Object(c.c)("div",{sx:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.65)",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"none"}},Object(c.c)(Tt,{sx:{height:"4em"}}),Object(c.c)("p",{sx:{my:3}},b("review-part-will-be-removed"))),Object(c.c)("video",{ref:p[t],key:t,src:e.url,onLoadedData:function(e){e.target.currentTime=Number.MAX_VALUE,v[t].current="started"},onTimeUpdate:x?function(e){var t=e.target.currentTime;D(w(t)),a(e)}:function(e){if(!x)switch(v[t].current){case"started":e.target.currentTime=.001,v[t].current="done";break;case"done":v.filter((function(e){return"done"===e.current})).length===u.length&&y(!0)}},preload:"auto",sx:{width:"100%",height:"100%",backgroundColor:"#ccc",outline:"none"}})),dimensions:function(){return e.dimensions}}}));return Object(c.c)(ee,{gap:20},R)}));function qt(e){var t=e.activeStep,n=e.updateActiveStep,r=e.userHasWebcam;return Object(p.e)()?Object(c.c)(U,{activeStep:t,updateActiveStep:n},Object(c.c)(Be,{userHasWebcam:r}),Object(c.c)(ae,null),Object(c.c)(Et,null),Object(c.c)(Ht,null),Object(c.c)(ve,null)):null}var Bt=[{short:"en",long:"English",rtl:!1},{short:"de",long:"Deutsch",rtl:!1},{short:"nl",long:"Dutch",rtl:!1},{short:"el",long:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",rtl:!1},{short:"es",long:"Espa\xf1ol",rtl:!1},{short:"fa",long:"Farsi",rtl:!0},{short:"fr",long:"Fran\xe7ais",rtl:!1},{short:"sl",long:"Sloven\u0161\u010dina",rtl:!1},{short:"tr",long:"Turkish",rtl:!1}],Vt=function(e){var t=e.title,n=e.children;return Object(c.c)(a.a,{sx:{"&:not(:last-child)":{mb:5}}},Object(c.c)(x.b.h2,{sx:{borderBottom:function(e){return"1px solid ".concat(e.colors.gray[2])},pb:1,my:3,mx:0}},t),n)},Gt=function(){var e=Object(C.a)().i18n;return Object(c.c)(Vt,{title:"Language"},Object(c.c)("select",{sx:{variant:"styles.select"},defaultValue:e.language,onChange:function(t){return e.changeLanguage(t.target.value)}},Bt.map((function(e){return Object(c.c)("option",{value:e.short,key:e.short},e.long)}))))};var Kt=function(e){var t=e.settingsManager,n=Object(u.h)(),i=Object(C.a)().t,s=Object(be.n)(),d=Object(o.useState)(),p=Object(r.a)(d,2),O=p[0],f=p[1],j=Object(se.a)({defaultValues:t.formValues().opencast}),v=j.errors,g=j.handleSubmit,h=j.register,x=Object(o.useState)("initial"),S=Object(r.a)(x,2),k=S[0],E=S[1],D=m().recordings.length>0;function R(){return(R=Object(_.a)(P.a.mark((function e(n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E("testing"),e.next=3,be.a.init(Object(b.a)(Object(b.a)({},t.settings().opencast),n));case 3:r=e.sent,e.t0=r.getState(),e.next=e.t0===be.f?7:e.t0===be.g?12:e.t0===be.h?15:e.t0===be.e?18:e.t0===be.d?21:(e.t0===be.c||(e.t0,be.i),24);break;case 7:return s.setGlobalInstance(r),t.saveSettings({opencast:n}),E("saved"),f(null),e.abrupt("break",27);case 12:return E("error"),f(i("upload-settings-error-server-unreachable")),e.abrupt("break",27);case 15:return E("error"),f(i("upload-settings-error-response-not-ok")),e.abrupt("break",27);case 18:return E("error"),f(i("upload-settings-error-invalid-response")),e.abrupt("break",27);case 21:return E("error"),s.isLoginProvided()?f(i("upload-settings-invalid-provided-login")):f(i("upload-settings-invalid-login-data")),e.abrupt("break",27);case 24:console.error("bug: invalid state reached..."),E("error"),f("internal error :(");case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=t.isConfigurable("opencast.serverUrl"),T=t.isUsernameConfigurable(),U=t.isPasswordConfigurable();if(!A&&!T&&!U)return null;var I={testing:w.h,error:w.l,saved:w.f}[k];return Object(c.c)(Vt,{title:i("upload-settings-modal-header")},Object(c.c)(a.a,null,O&&Object(c.c)(te,{isDanger:!0},O),Object(c.c)("form",{onSubmit:g((function(e){return R.apply(this,arguments)}))},A&&Object(c.c)(Oe,{errors:v,label:i("upload-settings-label-server-url"),name:"serverUrl",register:h,validate:function(e){try{var t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol||i("upload-settings-invalid-url-http-start")}catch(r){var n=i("upload-settings-invalid-url");return e.startsWith("https://")||e.startsWith("http://")||(n+=" "+i("upload-settings-invalid-url-http-start")),n}},required:!0}),T&&Object(c.c)(Oe,{errors:v,label:i("upload-settings-label-username"),name:"loginName",register:h,required:!0}),U&&Object(c.c)(Oe,{errors:v,label:i("upload-settings-label-password"),name:"loginPassword",register:h,required:!0,type:"password"}),Object(c.c)("footer",{sx:{mt:4}},Object(c.c)(a.b,{title:i("upload-settings-button-store"),sx:{verticalAlign:"middle"}},i("upload-settings-button-store")),I&&Object(c.c)(y.a,{icon:I,sx:{ml:"10px",fontSize:"30px",verticalAlign:"middle"},spin:"testing"===k}),D&&"saved"===k&&Object(c.c)(l.b,{to:{pathname:"/",search:n.search},sx:{ml:3,variant:"styles.a"}},i("settings-back-to-recording"))))))},Xt=function(e){var t=e.settingsManager,n=Object(C.a)().t;return Object(c.c)(a.a,{sx:{width:"100%",maxWidth:960,mx:"auto",p:3}},Object(c.c)("header",null,Object(c.c)(x.b.h1,null,n("settings-header"))),Object(c.c)(Gt,null),Object(c.c)(Kt,{settingsManager:t}))},Yt=function(){var e=Object(C.a)().t,t=[];return"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&t.push(Object(c.c)(te,{key:"unsecure-connection",isDanger:!0},e("warning-https"))),Object(p.e)()||t.push(Object(c.c)(te,{key:"media-recorder",isDanger:!0},e("warning-recorder-not-supported"),Object(p.h)()&&" "+e("warning-recorder-safari-hint"))),t.length>0?Object(c.c)("div",{sx:{p:3}},t):null};var Qt=function(e){var t=e.settingsManager,n=e.userHasWebcam,a=Object(o.useState)(0),i=Object(r.a)(a,2),l=i[0],s=i[1],d=Object(u.h)();return Object(c.c)(o.Fragment,null,Object(c.c)(Jt,null),Object(c.c)(u.d,null,Object(c.c)(u.b,{path:"/settings",exact:!0},Object(c.c)(Xt,{settingsManager:t})),Object(c.c)(u.b,{path:"/about",exact:!0},Object(c.c)(k,null)),Object(c.c)(u.b,{path:"/",exact:!0},Object(c.c)(qt,{activeStep:l,updateActiveStep:s,userHasWebcam:n})),Object(c.c)(u.b,{path:"/*"},Object(c.c)(u.a,{to:{pathname:"/",search:d.search}}))))},Jt=function(){var e=m(),t=e.recordings,n=e.upload,r=t.every((function(e){return e.downloaded})),a="uploaded"===n.state,o="uploading"===n.state;return Object(c.c)(s.a,{onBeforeunload:function(e){((null===t||void 0===t?void 0:t.length)>0&&!a&&!r||o)&&e.preventDefault()}})};t.default=function(e){var t=e.settingsManager,n=e.userHasWebcam;return Object(c.c)(l.a,{basename:"/"},Object(c.c)(g,null,Object(c.c)(a.e,{sx:{flexDirection:"column",height:"100%"}},Object(c.c)(D,null),Object(c.c)("main",{sx:{flex:1,display:"flex",flexDirection:"column",minHeight:"285px"}},Object(c.c)(Yt,null),Object(c.c)(Qt,{settingsManager:t,userHasWebcam:n})))))}}}]);
//# sourceMappingURL=4.233a280e.chunk.js.map